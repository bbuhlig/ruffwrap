#!/usr/bin/env sh
set -eu

is_ge_311() {
  "$1" -c 'import sys; sys.exit(0 if sys.version_info[:2] >= (3,11) else 1)'
}

for py in python3 python3.11 python3.12 python3.13; do
  if command -v "$py" >/dev/null 2>&1 && is_ge_311 "$py"; then
    RUFFWRAP_INVOKED_AS="$0" exec "$py" -m ruffwrap.cli "$@"
  fi
done

echo "$0: Error: need Python >= 3.11 (tried: python3, python3.11, python3.12, python3.13)" >&2
exit 127

